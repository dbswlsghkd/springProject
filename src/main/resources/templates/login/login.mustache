<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--    <script src="/js/home/login.js" defer></script>-->
    <link rel="stylesheet" href="/css/styles.css" />
    <title>Document</title>
</head>
<body>
<div class="login-page">
    <div class="form">
        <!-- <form class="register-form">
            <input type="text" placeholder="name" />
            <input type="password" placeholder="password" />
            <input type="text" placeholder="email address" />
            <button>create</button>
            <p class="message">
                Already registered? <a href="#">Sign In</a>
            </p>
        </form> -->
        <form class="login-form" action="/login" method="post">
            <input
                    id="id"
                    type="text"
                    placeholder="아이디"
                    maxlength="30"
            />
            <input id="psword" type="password" placeholder="비밀번호" />
            <p id="button">login</p>
<!--            <input id="submit" type="submit" value="Login" />-->
            <p class="message">
                Not registered?
                <a href="/register">Create an account</a>
            </p>
        </form>
    </div>
</div>
</body>
</html>
<Script>
    <!-- 아이디, 비밀번호 조회 -->
    {
        // 수정 완료 버튼
        const loginBtn = document.querySelector("#button");
        // 클릭 이벤트 처리
        loginBtn.addEventListener("click", function() {
            // 수정 댓글 객체 생성
            const LoginData = {
                userid: document.querySelector("#id").value,
                psword: document.querySelector("#psword").value
            };
            // return;
            // 수정 REST API 호출 - fetch()
            const url = "/login"
            fetch(url, {
                method: "POST",
                body: JSON.stringify(LoginData),
                headers: {
                    "Content-Type": "application/json"
                }
            })
                    // .then((res) => {
                    //     console.log(res, " 1");
                    //     if (!res.ok) {
                    //         throw new Error("HTTP error " + res.status);
                    //     }
                    //     return res.json();
                    // })
                    .then(res => {
                        console.log(res);
                        if (res.ok) {
                            location.href = "/articles";
                        } else {
                            alert("아이디와 비밀번호를 확인해주세요.");
                        }
                    })
                    .catch(error => {
                        console.error("Error occurred:", error);
                    });
        });
    }
</script>

<!-- Copyright (c) 2024 by Aigars Silkalns (https://codepen.io/colorlib/pen/rxddKy) -->
