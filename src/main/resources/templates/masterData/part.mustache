{{>layouts/header}}
<div class="input-group mb-3 w-25">
    <input id="searchInput" type="text" class="form-control" placeholder="검색어를 입력하세요" aria-label="Recipient's username" aria-describedby="basic-addon2">
    <button class="btn btn-outline-secondary" type="button" id="button-addon2">
        <i class="bi bi-search"></i>
    </button>
</div>
<table class="table table-striped table-sm">
    <thead class="table-dark">
    <tr>
        <th scope="col">품번</th>
        <th scope="col">품명</th>
        <th scope="col">규격</th>
    </tr>
    </thead>
    <tbody>
    {{#part}}
        <tr>
            <th>{{part_code}}</th>
            <td>{{part_name}}</td>
            <td>{{part_std}}</td>
        </tr>
    {{/part}}
    </tbody>
</table>
<!-- 수정 링크 추가 -->
<!--<a href="/articles/{{!article.id}}/edit" class="btn btn-primary">Edit</a>-->
<!-- 삭제 링크 추가 -->
<!--<a href="/articles/{{!article.id}}/delete" class="btn btn-danger">Delete</a>-->


<!--댓글 뷰 페이지 삽입-->
{{!>comments/_comments}}

{{>layouts/footer}}

<script>

    document.getElementById('button-addon2').addEventListener('click', function () {
        const searchTerm = document.getElementById('searchInput').value;
        console.log(searchTerm);
        fetch(`/api/parts?search=${encodeURIComponent(searchTerm)}`)
                .then(response => response.json())
                .then(data => {
                    // 결과를 받아서 테이블 업데이트
                    const tbody = document.querySelector('tbody');
                    console.log(data, ' data');
                    tbody.innerHTML = ''; // 기존 데이터 삭제

                    data.forEach(part => {
                        const row = `
                    <tr>
                        <th>${part.part_code}</th>
                        <td>${part.part_name}</td>
                        <td>${part.part_std}</td>
                    </tr>
                `;
                        tbody.innerHTML += row; // 새 데이터 추가
                    });
                })
                .catch(error => {
                    console.error('Error fetching parts:', error);
                });
    });

</script>